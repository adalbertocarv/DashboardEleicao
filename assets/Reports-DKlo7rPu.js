import{c as j,r as n,j as e,L as g,F as f,U as y}from"./index-CX_Kz4I_.js";import{u as N}from"./useQuery-BEywYAK-.js";import{C as c}from"./Card-D8xCTCOE.js";import{b}from"./index-C-ESXXEL.js";import{F as w,C as v}from"./filter-DkRNsUHJ.js";import{C as D,M as k}from"./map-pin-D4S9fSNx.js";import{f as C,p as F}from"./pt-BR-BnWYOt86.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=j("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),H=()=>{const[a,r]=n.useState({}),[d,x]=n.useState(!1),[o,l]=n.useState("daily"),{data:m,isLoading:h}=N({queryKey:["surveys",a],queryFn:()=>b(a)}),u=()=>m?m.map(t=>({id:t.id,pesquisador:`Pesquisador ${t.pesquisador_id}`,data:C(new Date(t.data_hora),"dd/MM/yyyy HH:mm",{locale:F}),localizacao:`${t.latitude.toFixed(4)}, ${t.longitude.toFixed(4)}`,perfil:`${t.idade} anos, ${t.sexo}`,satisfacao:t.satisfacao_servicos,interesse:`${t.interesse}/10`})):[],p=[{id:"daily",name:"Relatório Diário",icon:D},{id:"researchers",name:"Por Pesquisador",icon:y},{id:"regions",name:"Por Região",icon:k}],i=u();return h?e.jsx(g,{size:"lg"}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Relatórios"}),e.jsxs("div",{className:"mt-3 sm:mt-0 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsxs("button",{className:"btn btn-outline flex items-center",onClick:()=>x(!d),children:[e.jsx(w,{size:16,className:"mr-1"}),"Filtros",e.jsx(v,{size:16,className:"ml-1"})]}),e.jsxs("button",{className:"btn btn-primary flex items-center",children:[e.jsx(R,{size:16,className:"mr-1"}),"Exportar CSV"]})]})]}),d&&e.jsxs(c,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Data Inicial"}),e.jsx("input",{type:"date",className:"input w-full",value:a.startDate||"",onChange:s=>r(t=>({...t,startDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Data Final"}),e.jsx("input",{type:"date",className:"input w-full",value:a.endDate||"",onChange:s=>r(t=>({...t,endDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Tipo de Relatório"}),e.jsx("select",{className:"input w-full",value:o,onChange:s=>l(s.target.value),children:p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{className:"btn btn-outline",onClick:()=>{r({}),l("daily")},children:"Limpar Filtros"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>x(!1),children:"Aplicar Filtros"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:p.map(s=>e.jsx(c,{className:`cursor-pointer transition-all ${o===s.id?"ring-2 ring-blue-500":""}`,onClick:()=>l(s.id),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full mr-4",children:e.jsx(s.icon,{size:20,className:"text-blue-900"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.length," registros disponíveis"]})]})]})},s.id))}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{size:20,className:"text-blue-900"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Dados do Relatório"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.length," registros encontrados"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pesquisador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Localização"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Satisfação"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interesse"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",s.id]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:s.pesquisador}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.data}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.localizacao}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.perfil}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.satisfacao}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.interesse})]},s.id))})]})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Página 1 de ",Math.ceil(i.length/10)]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn btn-outline",disabled:!0,children:"Anterior"}),e.jsx("button",{className:"btn btn-outline",children:"Próxima"})]})]})]})]})};export{H as default};
