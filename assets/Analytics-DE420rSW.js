import{c as h,r as v,j as e,L as C,B as f}from"./index-CX_Kz4I_.js";import{u as F}from"./useQuery-BEywYAK-.js";import{C as m}from"./Card-D8xCTCOE.js";import{C as g}from"./ChartContainer-CIGup35M.js";import{b as k}from"./index-C-ESXXEL.js";import{F as D,C as I}from"./filter-DkRNsUHJ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=h("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=h("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),L=()=>{const[d,u]=v.useState({}),[j,p]=v.useState(!1),{data:i,isLoading:b}=F({queryKey:["surveys",d],queryFn:()=>k(d)}),N=()=>{if(!i)return null;const s=i.length,n=i.reduce((r,c)=>r+c.idade,0)/s,o=i.reduce((r,c)=>r+c.confianca,0)/s,x=i.reduce((r,c)=>r+c.interesse,0)/s;return{totalSurveys:s,avgAge:n.toFixed(1),avgConfidence:o.toFixed(1),avgInterest:x.toFixed(1)}},y=()=>{if(!i)return null;const s={"18-24":0,"25-34":0,"35-44":0,"45-54":0,"55-64":0,"65+":0};i.forEach(t=>{t.idade<25?s["18-24"]++:t.idade<35?s["25-34"]++:t.idade<45?s["35-44"]++:t.idade<55?s["45-54"]++:t.idade<65?s["55-64"]++:s["65+"]++});const n={labels:Object.keys(s),datasets:[{label:"Distribuição por Idade",data:Object.values(s),backgroundColor:["#1E40AF","#2563EB","#3B82F6","#60A5FA","#93C5FD","#BFDBFE"]}]},o={"Muito insatisfeito":0,Insatisfeito:0,Neutro:0,Satisfeito:0,"Muito satisfeito":0};i.forEach(t=>{o[t.satisfacao_servicos]++});const x={labels:Object.keys(o),datasets:[{label:"Nível de Satisfação",data:Object.values(o),backgroundColor:"#0F766E"}]},r={Sim:i.filter(t=>t.vai_votar==="Sim").length,Não:i.filter(t=>t.vai_votar==="Não").length},c={labels:Object.keys(r),datasets:[{label:"Intenção de Voto",data:Object.values(r),backgroundColor:["#15803D","#DC2626"]}]};return{ageDistribution:n,satisfactionDistribution:x,votingIntentionData:c}},a=N(),l=y();return b?e.jsx(C,{size:"lg"}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Análise de Dados"}),e.jsxs("button",{className:"mt-3 sm:mt-0 btn btn-outline flex items-center",onClick:()=>p(!j),children:[e.jsx(D,{size:16,className:"mr-1"}),"Filtros",e.jsx(I,{size:16,className:"ml-1"})]})]}),j&&e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Data Inicial"}),e.jsx("input",{type:"date",className:"input w-full",value:d.startDate||"",onChange:s=>u(n=>({...n,startDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Data Final"}),e.jsx("input",{type:"date",className:"input w-full",value:d.endDate||"",onChange:s=>u(n=>({...n,endDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Faixa Etária"}),e.jsxs("select",{className:"input w-full",value:d.ageRange?`${d.ageRange[0]}-${d.ageRange[1]}`:"",onChange:s=>{const[n,o]=s.target.value.split("-").map(Number);u(x=>({...x,ageRange:[n,o]}))},children:[e.jsx("option",{value:"",children:"Todas as idades"}),e.jsx("option",{value:"18-24",children:"18-24 anos"}),e.jsx("option",{value:"25-34",children:"25-34 anos"}),e.jsx("option",{value:"35-44",children:"35-44 anos"}),e.jsx("option",{value:"45-54",children:"45-54 anos"}),e.jsx("option",{value:"55-100",children:"55+ anos"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{className:"btn btn-outline",onClick:()=>u({}),children:"Limpar Filtros"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>p(!1),children:"Aplicar Filtros"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full mr-4",children:e.jsx(f,{size:20,className:"text-blue-900"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total de Pesquisas"}),e.jsx("p",{className:"text-xl font-semibold",children:(a==null?void 0:a.totalSurveys)||0})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-teal-100 rounded-full mr-4",children:e.jsx(S,{size:20,className:"text-teal-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Idade Média"}),e.jsxs("p",{className:"text-xl font-semibold",children:[(a==null?void 0:a.avgAge)||0," anos"]})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-full mr-4",children:e.jsx(A,{size:20,className:"text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Confiança Média"}),e.jsxs("p",{className:"text-xl font-semibold",children:[(a==null?void 0:a.avgConfidence)||0,"/10"]})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-full mr-4",children:e.jsx(f,{size:20,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Interesse Médio"}),e.jsxs("p",{className:"text-xl font-semibold",children:[(a==null?void 0:a.avgInterest)||0,"/10"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(g,{title:"Distribuição por Idade",type:"pie",data:(l==null?void 0:l.ageDistribution)||{labels:[],datasets:[]}}),e.jsx(g,{title:"Nível de Satisfação",type:"bar",data:(l==null?void 0:l.satisfactionDistribution)||{labels:[],datasets:[]}})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(g,{title:"Intenção de Voto",type:"doughnut",data:(l==null?void 0:l.votingIntentionData)||{labels:[],datasets:[]}})})]})};export{L as default};
